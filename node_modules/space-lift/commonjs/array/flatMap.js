"use strict";
exports.__esModule = true;
var option_1 = require("../option");
var lift_1 = require("../lift");
/**
 * Maps this Array to an Array of Array | Option | ArrayOps using a mapper function then flattens it.
 */
function flatMap(fun) {
    var arr = this.value(), result = [];
    for (var i = 0; i < arr.length; i++) {
        var item = fun(arr[i], i);
        if (option_1.Option.isOption(item))
            item.isDefined() && result.push(item.get());
        else
            result.push.apply(result, lift_1.getValue(item));
    }
    return new lift_1.ArrayOps(result);
}
exports.flatMap = flatMap;
lift_1.ArrayOps.prototype.flatMap = flatMap;
